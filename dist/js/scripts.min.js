const $ = window.$;
let pokemonRepository = (function() {
  let t = [];
  function e() {
    return t;
  }
  function n(e) {
    t.push(e);
  }
  function o(t) {
    return fetch(t.detailsUrl)
      .then(function(t) {
        return t.json();
      })
      .then(function(e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.weight = e.weight),
          (t.types = e.types.map(t => t.type.name).join(', '));
      })
      .catch(function(t) {
        console.error(t);
      });
  }
  function i(t) {
    o(t).then(function() {
      var e;
      let n, o, i, a, r, p, l;
      (e = t),
        (n = $('.modal-body')),
        (o = $('.modal-title')),
        o.empty(),
        n.empty(),
        (i = $('<h1>' + e.name + '</h1>')),
        (a = $('<img class="modal-img">')),
        a.attr('src', e.imageUrl),
        (r = $('<p>Height: ' + e.height + 'mm</p>')),
        (p = $('<p>Weight: ' + e.weight + '</p>')),
        (l = $('<p>Types: ' + e.types + '</p>')),
        o.append(i),
        n.append(a),
        n.append(r),
        n.append(p),
        n.append(l);
    });
  }
  return {
    add: n,
    getAll: e,
    loadList: function t() {
      return fetch('https://pokeapi.co/api/v2/pokemon/?limit=150')
        .then(function(t) {
          return t.json();
        })
        .then(function(t) {
          t.results.forEach(function(t) {
            n({ name: t.name, detailsUrl: t.url });
          });
        })
        .catch(function(t) {
          console.error(t);
        });
    },
    loadDetails: o,
    addListItem: function t(e) {
      let n = document.querySelector('.pokemon-list'),
        o = document.createElement('li'),
        a = document.createElement('button');
      (a.innerText = e.name),
        a.classList.add('button-class'),
        a.setAttribute('data-target', '.modal'),
        a.setAttribute('data-toggle', 'modal'),
        a.setAttribute('data-is-clicked', 'false'),
        o.appendChild(a),
        n.appendChild(o),
        a.addEventListener('click', function() {
          i(e);
        });
    },
    showDetails: i
  };
})();
pokemonRepository.loadList().then(function() {
  pokemonRepository.getAll().forEach(function(t) {
    pokemonRepository.addListItem(t);
  });
});
